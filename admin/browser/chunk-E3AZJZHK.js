import{a as Ee}from"./chunk-QNS47UYK.js";import{a as Wt}from"./chunk-5Q5U7TJG.js";import"./chunk-S7BSO77O.js";import{b as me,c as he,f as ge,i as fe,k as _e,o as be,p as ye,q as ve,t as Ce}from"./chunk-WYCOUGZ3.js";import{L as se,M as At,P as Ht,R as jt,S as le,V as ce,W as de,Y as pe,aa as Ut,ba as ue}from"./chunk-5OO6GXAC.js";import{k as re,l as ae,w as oe}from"./chunk-DTXGXR4A.js";import{Bb as st,Cb as lt,Db as ct,Ka as R,Kb as ne,Pa as Bt,Ua as Jt,W as Tt,Za as St,a as Mt,b as Ft,d as Se,e as Kt,fb as yt,g as it,ia as T,ib as p,ja as A,jb as u,kb as $,lb as Qt,mb as Yt,nb as Pt,qb as Y,rb as U,tb as Xt,ub as te,vb as ee,wb as ie,xb as f,yb as pt,zb as Dt}from"./chunk-2KT3GOAN.js";var xe=Se(($t,qt)=>{"use strict";((l,t)=>{typeof define=="function"&&define.amd?define([],t):typeof qt=="object"&&typeof $t<"u"?qt.exports=t():l.Papa=t()})($t,function l(){var t=typeof self<"u"?self:typeof window<"u"?window:t!==void 0?t:{},i,e=!t.document&&!!t.postMessage,r=t.IS_PAPA_WORKER||!1,o={},d=0,c={};function m(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(a){var s=Rt(a);s.chunkSize=parseInt(s.chunkSize),a.step||a.chunk||(s.chunkSize=null),this._handle=new vt(s),(this._handle.streamer=this)._config=s}.call(this,n),this.parseChunk=function(a,s){var g=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<g){let C=this._config.newline;C||(h=this._config.quoteChar||'"',C=this._handle.guessLineEndings(a,h)),a=[...a.split(C).slice(g)].join(C)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(h=this._config.beforeFirstChunk(a))!==void 0&&(a=h),this.isFirstChunk=!1,this._halted=!1;var g=this._partialLine+a,h=(this._partialLine="",this._handle.parse(g,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(a=h.meta.cursor,g=(this._finished||(this._partialLine=g.substring(a-this._baseIndex),this._baseIndex=a),h&&h.data&&(this._rowCount+=h.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),r)t.postMessage({results:h,workerId:c.WORKER_ID,finished:g});else if(I(this._config.chunk)&&!s){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=h=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!g||!I(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),g||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(a){I(this._config.error)?this._config.error(a):r&&this._config.error&&t.postMessage({workerId:c.WORKER_ID,error:a,finished:!1})}}function b(n){var a;(n=n||{}).chunkSize||(n.chunkSize=c.RemoteChunkSize),m.call(this,n),this._nextChunk=e?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(a=new XMLHttpRequest,this._config.withCredentials&&(a.withCredentials=this._config.withCredentials),e||(a.onload=mt(this._chunkLoaded,this),a.onerror=mt(this._chunkError,this)),a.open(this._config.downloadRequestBody?"POST":"GET",this._input,!e),this._config.downloadRequestHeaders){var s,g=this._config.downloadRequestHeaders;for(s in g)a.setRequestHeader(s,g[s])}var h;this._config.chunkSize&&(h=this._start+this._config.chunkSize-1,a.setRequestHeader("Range","bytes="+this._start+"-"+h));try{a.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}e&&a.status===0&&this._chunkError()}},this._chunkLoaded=function(){a.readyState===4&&(a.status<200||400<=a.status?this._chunkError():(this._start+=this._config.chunkSize||a.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(a),this.parseChunk(a.responseText)))},this._chunkError=function(s){s=a.statusText||s,this._sendError(new Error(s))}}function P(n){(n=n||{}).chunkSize||(n.chunkSize=c.LocalChunkSize),m.call(this,n);var a,s,g=typeof FileReader<"u";this.stream=function(h){this._input=h,s=h.slice||h.webkitSlice||h.mozSlice,g?((a=new FileReader).onload=mt(this._chunkLoaded,this),a.onerror=mt(this._chunkError,this)):a=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var h=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),h=s.call(h,this._start,C)),a.readAsText(h,this._config.encoding));g||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(h){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(h.target.result)},this._chunkError=function(){this._sendError(a.error)}}function D(n){var a;m.call(this,n=n||{}),this.stream=function(s){return a=s,this._nextChunk()},this._nextChunk=function(){var s,g;if(!this._finished)return s=this._config.chunkSize,a=s?(g=a.substring(0,s),a.substring(s)):(g=a,""),this._finished=!a,this.parseChunk(g)}}function ut(n){m.call(this,n=n||{});var a=[],s=!0,g=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(h){this._input=h,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&a.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),a.length?this.parseChunk(a.shift()):s=!0},this._streamData=mt(function(h){try{a.push(typeof h=="string"?h:h.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(a.shift()))}catch(C){this._streamError(C)}},this),this._streamError=mt(function(h){this._streamCleanUp(),this._sendError(h)},this),this._streamEnd=mt(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=mt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function vt(n){var a,s,g,h,C=Math.pow(2,53),q=-C,rt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,at=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,M=this,H=0,y=0,X=!1,v=!1,S=[],_={data:[],errors:[],meta:{}};function G(E){return n.skipEmptyLines==="greedy"?E.join("").trim()==="":E.length===1&&E[0].length===0}function W(){if(_&&g&&(ot("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),g=!1),n.skipEmptyLines&&(_.data=_.data.filter(function(N){return!G(N)})),Q()){let N=function(K,z){I(n.transformHeader)&&(K=n.transformHeader(K,z)),S.push(K)};var x=N;if(_)if(Array.isArray(_.data[0])){for(var E=0;Q()&&E<_.data.length;E++)_.data[E].forEach(N);_.data.splice(0,1)}else _.data.forEach(N)}function k(N,K){for(var z=n.header?{}:[],F=0;F<N.length;F++){var w=F,tt=N[F],tt=((O,V)=>(Z=>(n.dynamicTypingFunction&&n.dynamicTyping[Z]===void 0&&(n.dynamicTyping[Z]=n.dynamicTypingFunction(Z)),(n.dynamicTyping[Z]||n.dynamicTyping)===!0))(O)?V==="true"||V==="TRUE"||V!=="false"&&V!=="FALSE"&&((Z=>{if(rt.test(Z)&&(Z=parseFloat(Z),q<Z&&Z<C))return 1})(V)?parseFloat(V):at.test(V)?new Date(V):V===""?null:V):V)(w=n.header?F>=S.length?"__parsed_extra":S[F]:w,tt=n.transform?n.transform(tt,w):tt);w==="__parsed_extra"?(z[w]=z[w]||[],z[w].push(tt)):z[w]=tt}return n.header&&(F>S.length?ot("FieldMismatch","TooManyFields","Too many fields: expected "+S.length+" fields but parsed "+F,y+K):F<S.length&&ot("FieldMismatch","TooFewFields","Too few fields: expected "+S.length+" fields but parsed "+F,y+K)),z}var j;_&&(n.header||n.dynamicTyping||n.transform)&&(j=1,!_.data.length||Array.isArray(_.data[0])?(_.data=_.data.map(k),j=_.data.length):_.data=k(_.data,0),n.header&&_.meta&&(_.meta.fields=S),y+=j)}function Q(){return n.header&&S.length===0}function ot(E,k,j,x){E={type:E,code:k,message:j},x!==void 0&&(E.row=x),_.errors.push(E)}I(n.step)&&(h=n.step,n.step=function(E){_=E,Q()?W():(W(),_.data.length!==0&&(H+=E.data.length,n.preview&&H>n.preview?s.abort():(_.data=_.data[0],h(_,M))))}),this.parse=function(E,k,j){var x=n.quoteChar||'"',x=(n.newline||(n.newline=this.guessLineEndings(E,x)),g=!1,n.delimiter?I(n.delimiter)&&(n.delimiter=n.delimiter(E),_.meta.delimiter=n.delimiter):((x=((N,K,z,F,w)=>{var tt,O,V,Z;w=w||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var xt=0;xt<w.length;xt++){for(var ht,Ot=w[xt],et=0,gt=0,J=0,nt=(V=void 0,new Et({comments:F,delimiter:Ot,newline:K,preview:10}).parse(N)),bt=0;bt<nt.data.length;bt++)z&&G(nt.data[bt])?J++:(ht=nt.data[bt].length,gt+=ht,V===void 0?V=ht:0<ht&&(et+=Math.abs(ht-V),V=ht));0<nt.data.length&&(gt/=nt.data.length-J),(O===void 0||et<=O)&&(Z===void 0||Z<gt)&&1.99<gt&&(O=et,tt=Ot,Z=gt)}return{successful:!!(n.delimiter=tt),bestDelimiter:tt}})(E,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=x.bestDelimiter:(g=!0,n.delimiter=c.DefaultDelimiter),_.meta.delimiter=n.delimiter),Rt(n));return n.preview&&n.header&&x.preview++,a=E,s=new Et(x),_=s.parse(a,k,j),W(),X?{meta:{paused:!0}}:_||{meta:{paused:!1}}},this.paused=function(){return X},this.pause=function(){X=!0,s.abort(),a=I(n.chunk)?"":a.substring(s.getCharIndex())},this.resume=function(){M.streamer._halted?(X=!1,M.streamer.parseChunk(a,!0)):setTimeout(M.resume,3)},this.aborted=function(){return v},this.abort=function(){v=!0,s.abort(),_.meta.aborted=!0,I(n.complete)&&n.complete(_),a=""},this.guessLineEndings=function(N,x){N=N.substring(0,1048576);var x=new RegExp(_t(x)+"([^]*?)"+_t(x),"gm"),j=(N=N.replace(x,"")).split("\r"),x=N.split(`
`),N=1<x.length&&x[0].length<j[0].length;if(j.length===1||N)return`
`;for(var K=0,z=0;z<j.length;z++)j[z][0]===`
`&&K++;return K>=j.length/2?`\r
`:"\r"}}function _t(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Et(n){var a=(n=n||{}).delimiter,s=n.newline,g=n.comments,h=n.step,C=n.preview,q=n.fastMode,rt=null,at=!1,M=n.quoteChar==null?'"':n.quoteChar,H=M;if(n.escapeChar!==void 0&&(H=n.escapeChar),(typeof a!="string"||-1<c.BAD_DELIMITERS.indexOf(a))&&(a=","),g===a)throw new Error("Comment character same as delimiter");g===!0?g="#":(typeof g!="string"||-1<c.BAD_DELIMITERS.indexOf(g))&&(g=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var y=0,X=!1;this.parse=function(v,S,_){if(typeof v!="string")throw new Error("Input must be a string");var G=v.length,W=a.length,Q=s.length,ot=g.length,E=I(h),k=[],j=[],x=[],N=y=0;if(!v)return et();if(q||q!==!1&&v.indexOf(M)===-1){for(var K=v.split(s),z=0;z<K.length;z++){if(x=K[z],y+=x.length,z!==K.length-1)y+=s.length;else if(_)return et();if(!g||x.substring(0,ot)!==g){if(E){if(k=[],Z(x.split(a)),gt(),X)return et()}else Z(x.split(a));if(C&&C<=z)return k=k.slice(0,C),et(!0)}}return et()}for(var F=v.indexOf(a,y),w=v.indexOf(s,y),tt=new RegExp(_t(H)+_t(M),"g"),O=v.indexOf(M,y);;)if(v[y]===M)for(O=y,y++;;){if((O=v.indexOf(M,O+1))===-1)return _||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:y}),ht();if(O===G-1)return ht(v.substring(y,O).replace(tt,M));if(M===H&&v[O+1]===H)O++;else if(M===H||O===0||v[O-1]!==H){F!==-1&&F<O+1&&(F=v.indexOf(a,O+1));var V=xt((w=w!==-1&&w<O+1?v.indexOf(s,O+1):w)===-1?F:Math.min(F,w));if(v.substr(O+1+V,W)===a){x.push(v.substring(y,O).replace(tt,M)),v[y=O+1+V+W]!==M&&(O=v.indexOf(M,y)),F=v.indexOf(a,y),w=v.indexOf(s,y);break}if(V=xt(w),v.substring(O+1+V,O+1+V+Q)===s){if(x.push(v.substring(y,O).replace(tt,M)),Ot(O+1+V+Q),F=v.indexOf(a,y),O=v.indexOf(M,y),E&&(gt(),X))return et();if(C&&k.length>=C)return et(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:y}),O++}}else if(g&&x.length===0&&v.substring(y,y+ot)===g){if(w===-1)return et();y=w+Q,w=v.indexOf(s,y),F=v.indexOf(a,y)}else if(F!==-1&&(F<w||w===-1))x.push(v.substring(y,F)),y=F+W,F=v.indexOf(a,y);else{if(w===-1)break;if(x.push(v.substring(y,w)),Ot(w+Q),E&&(gt(),X))return et();if(C&&k.length>=C)return et(!0)}return ht();function Z(J){k.push(J),N=y}function xt(J){var nt=0;return nt=J!==-1&&(J=v.substring(O+1,J))&&J.trim()===""?J.length:nt}function ht(J){return _||(J===void 0&&(J=v.substring(y)),x.push(J),y=G,Z(x),E&&gt()),et()}function Ot(J){y=J,Z(x),x=[],w=v.indexOf(s,y)}function et(J){if(n.header&&!S&&k.length&&!at){var nt=k[0],bt=Object.create(null),Vt=new Set(nt);let Gt=!1;for(let wt=0;wt<nt.length;wt++){let ft=nt[wt];if(bt[ft=I(n.transformHeader)?n.transformHeader(ft,wt):ft]){let Lt,Zt=bt[ft];for(;Lt=ft+"_"+Zt,Zt++,Vt.has(Lt););Vt.add(Lt),nt[wt]=Lt,bt[ft]++,Gt=!0,(rt=rt===null?{}:rt)[Lt]=ft}else bt[ft]=1,nt[wt]=ft;Vt.add(ft)}Gt&&console.warn("Duplicate headers found and renamed."),at=!0}return{data:k,errors:j,meta:{delimiter:a,linebreak:s,aborted:X,truncated:!!J,cursor:N+(S||0),renamedHeaders:rt}}}function gt(){h(et()),k=[],j=[]}},this.abort=function(){X=!0},this.getCharIndex=function(){return y}}function Ct(n){var a=n.data,s=o[a.workerId],g=!1;if(a.error)s.userError(a.error,a.file);else if(a.results&&a.results.data){var h={abort:function(){g=!0,dt(a.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:kt,resume:kt};if(I(s.userStep)){for(var C=0;C<a.results.data.length&&(s.userStep({data:a.results.data[C],errors:a.results.errors,meta:a.results.meta},h),!g);C++);delete a.results}else I(s.userChunk)&&(s.userChunk(a.results,h,a.file),delete a.results)}a.finished&&!g&&dt(a.workerId,a.results)}function dt(n,a){var s=o[n];I(s.userComplete)&&s.userComplete(a),s.terminate(),delete o[n]}function kt(){throw new Error("Not implemented.")}function Rt(n){if(typeof n!="object"||n===null)return n;var a,s=Array.isArray(n)?[]:{};for(a in n)s[a]=Rt(n[a]);return s}function mt(n,a){return function(){n.apply(a,arguments)}}function I(n){return typeof n=="function"}return c.parse=function(n,a){var s=(a=a||{}).dynamicTyping||!1;if(I(s)&&(a.dynamicTypingFunction=s,s={}),a.dynamicTyping=s,a.transform=!!I(a.transform)&&a.transform,!a.worker||!c.WORKERS_SUPPORTED)return s=null,c.NODE_STREAM_INPUT,typeof n=="string"?(n=(g=>g.charCodeAt(0)!==65279?g:g.slice(1))(n),s=new(a.download?b:D)(a)):n.readable===!0&&I(n.read)&&I(n.on)?s=new ut(a):(t.File&&n instanceof File||n instanceof Object)&&(s=new P(a)),s.stream(n);(s=(()=>{var g;return!!c.WORKERS_SUPPORTED&&(g=(()=>{var h=t.URL||t.webkitURL||null,C=l.toString();return c.BLOB_URL||(c.BLOB_URL=h.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(g=new t.Worker(g)).onmessage=Ct,g.id=d++,o[g.id]=g)})()).userStep=a.step,s.userChunk=a.chunk,s.userComplete=a.complete,s.userError=a.error,a.step=I(a.step),a.chunk=I(a.chunk),a.complete=I(a.complete),a.error=I(a.error),delete a.worker,s.postMessage({input:n,config:a,workerId:s.id})},c.unparse=function(n,a){var s=!1,g=!0,h=",",C=`\r
`,q='"',rt=q+q,at=!1,M=null,H=!1,y=((()=>{if(typeof a=="object"){if(typeof a.delimiter!="string"||c.BAD_DELIMITERS.filter(function(S){return a.delimiter.indexOf(S)!==-1}).length||(h=a.delimiter),typeof a.quotes!="boolean"&&typeof a.quotes!="function"&&!Array.isArray(a.quotes)||(s=a.quotes),typeof a.skipEmptyLines!="boolean"&&typeof a.skipEmptyLines!="string"||(at=a.skipEmptyLines),typeof a.newline=="string"&&(C=a.newline),typeof a.quoteChar=="string"&&(q=a.quoteChar),typeof a.header=="boolean"&&(g=a.header),Array.isArray(a.columns)){if(a.columns.length===0)throw new Error("Option columns is empty");M=a.columns}a.escapeChar!==void 0&&(rt=a.escapeChar+q),a.escapeFormulae instanceof RegExp?H=a.escapeFormulae:typeof a.escapeFormulae=="boolean"&&a.escapeFormulae&&(H=/^[=+\-@\t\r].*$/)}})(),new RegExp(_t(q),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return X(null,n,at);if(typeof n[0]=="object")return X(M||Object.keys(n[0]),n,at)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||M),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),X(n.fields||[],n.data||[],at);throw new Error("Unable to serialize unrecognized input");function X(S,_,G){var W="",Q=(typeof S=="string"&&(S=JSON.parse(S)),typeof _=="string"&&(_=JSON.parse(_)),Array.isArray(S)&&0<S.length),ot=!Array.isArray(_[0]);if(Q&&g){for(var E=0;E<S.length;E++)0<E&&(W+=h),W+=v(S[E],E);0<_.length&&(W+=C)}for(var k=0;k<_.length;k++){var j=(Q?S:_[k]).length,x=!1,N=Q?Object.keys(_[k]).length===0:_[k].length===0;if(G&&!Q&&(x=G==="greedy"?_[k].join("").trim()==="":_[k].length===1&&_[k][0].length===0),G==="greedy"&&Q){for(var K=[],z=0;z<j;z++){var F=ot?S[z]:z;K.push(_[k][F])}x=K.join("").trim()===""}if(!x){for(var w=0;w<j;w++){0<w&&!N&&(W+=h);var tt=Q&&ot?S[w]:w;W+=v(_[k][tt],w)}k<_.length-1&&(!G||0<j&&!N)&&(W+=C)}}return W}function v(S,_){var G,W;return S==null?"":S.constructor===Date?JSON.stringify(S).slice(1,25):(W=!1,H&&typeof S=="string"&&H.test(S)&&(S="'"+S,W=!0),G=S.toString().replace(y,rt),(W=W||s===!0||typeof s=="function"&&s(S,_)||Array.isArray(s)&&s[_]||((Q,ot)=>{for(var E=0;E<ot.length;E++)if(-1<Q.indexOf(ot[E]))return!0;return!1})(G,c.BAD_DELIMITERS)||-1<G.indexOf(h)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?q+G+q:G)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!e&&!!t.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=Et,c.ParserHandle=vt,c.NetworkStreamer=b,c.FileStreamer=P,c.StringStreamer=D,c.ReadableStreamStreamer=ut,t.jQuery&&((i=t.jQuery).fn.parse=function(n){var a=n.config||{},s=[];return this.each(function(C){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&t.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)s.push({file:this.files[q],inputElem:this,instanceConfig:i.extend({},a)})}),g(),this;function g(){if(s.length===0)I(n.complete)&&n.complete();else{var C,q,rt,at,M=s[0];if(I(n.before)){var H=n.before(M.file,M.inputElem);if(typeof H=="object"){if(H.action==="abort")return C="AbortError",q=M.file,rt=M.inputElem,at=H.reason,void(I(n.error)&&n.error({name:C},q,rt,at));if(H.action==="skip")return void h();typeof H.config=="object"&&(M.instanceConfig=i.extend(M.instanceConfig,H.config))}else if(H==="skip")return void h()}var y=M.instanceConfig.complete;M.instanceConfig.complete=function(X){I(y)&&y(X,M.file,M.inputElem),h()},c.parse(M.file,M.instanceConfig)}}function h(){s.splice(0,1),g()}}),r&&(t.onmessage=function(n){n=n.data,c.WORKER_ID===void 0&&n&&(c.WORKER_ID=n.workerId),typeof n.input=="string"?t.postMessage({workerId:c.WORKER_ID,results:c.parse(n.input,n.config),finished:!0}):(t.File&&n.input instanceof File||n.input instanceof Object)&&(n=c.parse(n.input,n.config))&&t.postMessage({workerId:c.WORKER_ID,results:n,finished:!0})}),(b.prototype=Object.create(m.prototype)).constructor=b,(P.prototype=Object.create(m.prototype)).constructor=P,(D.prototype=Object.create(D.prototype)).constructor=D,(ut.prototype=Object.create(m.prototype)).constructor=ut,c})});var B=Kt(Ee());(function(){"use strict";function l(t){return this instanceof l?(this._canvas=t=typeof t=="string"?document.getElementById(t):t,this._ctx=t.getContext("2d"),this._width=t.width,this._height=t.height,this._max=1,void this.clear()):new l(t)}l.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,i){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,i){i=i||15;var e=this._circle=document.createElement("canvas"),r=e.getContext("2d"),o=this._r=t+i;return e.width=e.height=2*o,r.shadowOffsetX=r.shadowOffsetY=200,r.shadowBlur=i,r.shadowColor="black",r.beginPath(),r.arc(o-200,o-200,t,0,2*Math.PI,!0),r.closePath(),r.fill(),this},gradient:function(t){var i=document.createElement("canvas"),e=i.getContext("2d"),r=e.createLinearGradient(0,0,0,256);i.width=1,i.height=256;for(var o in t)r.addColorStop(o,t[o]);return e.fillStyle=r,e.fillRect(0,0,1,256),this._grad=e.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var i=this._ctx;i.clearRect(0,0,this._width,this._height);for(var e,r=0,o=this._data.length;o>r;r++)e=this._data[r],i.globalAlpha=Math.max(e[2]/this._max,t||.05),i.drawImage(this._circle,e[0]-this._r,e[1]-this._r);var d=i.getImageData(0,0,this._width,this._height);return this._colorize(d.data,this._grad),i.putImageData(d,0,0),this},_colorize:function(t,i){for(var e,r=3,o=t.length;o>r;r+=4)e=4*t[r],e&&(t[r-3]=i[e],t[r-2]=i[e+1],t[r-1]=i[e+2])}},window.simpleheat=l})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(l,t){this._latlngs=l,L.setOptions(this,t)},setLatLngs:function(l){return this._latlngs=l,this.redraw()},addLatLng:function(l){return this._latlngs.push(l),this.redraw()},setOptions:function(l){return L.setOptions(this,l),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(l){this._map=l,this._canvas||this._initCanvas(),l._panes.overlayPane.appendChild(this._canvas),l.on("moveend",this._reset,this),l.options.zoomAnimation&&L.Browser.any3d&&l.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(l){l.getPanes().overlayPane.removeChild(this._canvas),l.off("moveend",this._reset,this),l.options.zoomAnimation&&l.off("zoomanim",this._animateZoom,this)},addTo:function(l){return l.addLayer(this),this},_initCanvas:function(){var l=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),t=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);l.style[t]="50% 50%";var i=this._map.getSize();l.width=i.x,l.height=i.y;var e=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(l,"leaflet-zoom-"+(e?"animated":"hide")),this._heat=simpleheat(l),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var l=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,l);var t=this._map.getSize();this._heat._width!==t.x&&(this._canvas.width=this._heat._width=t.x),this._heat._height!==t.y&&(this._canvas.height=this._heat._height=t.y),this._redraw()},_redraw:function(){var l,t,i,e,r,o,d,c,m,b=[],P=this._heat._r,D=this._map.getSize(),ut=new L.Bounds(L.point([-P,-P]),D.add([P,P])),vt=this.options.max===void 0?1:this.options.max,_t=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,Et=1/Math.pow(2,Math.max(0,Math.min(_t-this._map.getZoom(),12))),Ct=P/2,dt=[],kt=this._map._getMapPanePos(),Rt=kt.x%Ct,mt=kt.y%Ct;for(l=0,t=this._latlngs.length;t>l;l++)if(i=this._map.latLngToContainerPoint(this._latlngs[l]),ut.contains(i)){r=Math.floor((i.x-Rt)/Ct)+2,o=Math.floor((i.y-mt)/Ct)+2;var I=this._latlngs[l].alt!==void 0?this._latlngs[l].alt:this._latlngs[l][2]!==void 0?+this._latlngs[l][2]:1;m=I*Et,dt[o]=dt[o]||[],e=dt[o][r],e?(e[0]=(e[0]*e[2]+i.x*m)/(e[2]+m),e[1]=(e[1]*e[2]+i.y*m)/(e[2]+m),e[2]+=m):dt[o][r]=[i.x,i.y,m]}for(l=0,t=dt.length;t>l;l++)if(dt[l])for(d=0,c=dt[l].length;c>d;d++)e=dt[l][d],e&&b.push([Math.round(e[0]),Math.round(e[1]),Math.min(e[2],vt)]);this._heat.data(b).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(l){var t=this._map.getZoomScale(l.zoom),i=this._map._getCenterOffset(l.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,t):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+t+")"}}),L.heatLayer=function(l,t){return new L.HeatLayer(l,t)};var It=Kt(xe());var Nt=class l{colecao=se(Wt,"rotas");parseCSV(t){return new Promise((i,e)=>{It.parse(t,{header:!0,skipEmptyLines:!0,complete:r=>{try{let o=r.meta.fields||[],d=r.data;if(o.some(m=>/latitude/i.test(m))&&o.some(m=>/longitude/i.test(m))){let m=d.map(this.normalizarLinhaPadrao).filter(b=>!!b);i(m)}else It.parse(t,{header:!1,skipEmptyLines:!0,complete:m=>{try{let b=m.data,P=this.parseMatrizArrays(b);i(P)}catch(b){e(b)}},error:m=>e(m)})}catch(o){e(o)}},error:r=>e(r)})})}parseMatrizArrays(t){let i=d=>String(d??"").trim(),e=t.findIndex(d=>{let c=(d||[]).map(m=>i(m).toUpperCase());return c.includes("SUPERVISOR")&&c.includes("ANALISTA")});if(e<0)return[];let r=new Map;for(let d=e+8;d<t.length;d++){let c=t[d]||[];for(let m=3;m<c.length;m++){let b=i(c[m]);b&&/[A-Za-zÀ-ÿ]/.test(b)&&!r.has(m)&&r.set(m,b)}if(r.size>=5&&d>e+10)break}let o=[];for(let d=e+3;d<Math.min(e+12,t.length);d++){let c=t[d]||[],m=i(c[0]),b=i(c[1]);r.forEach((P,D)=>{let ut=this.parseNumero(c[D]);if(Number.isFinite(ut)&&ut>0){let{bairro:vt,municipio:_t}=this.splitLocalidade(P);o.push({id:`${b||m}-${P}-${d}-${D}`,data:"",assessor:b||m||"\u2014",municipio:_t,bairro:vt,latitude:NaN,longitude:NaN,status:"planejada",peso:ut})}})}return o}splitLocalidade(t){let i=(t||"").trim();if(i.includes(" - ")){let[r,o]=i.split(" - ").map(d=>d.trim());return{bairro:r,municipio:o}}if(i.includes(",")){let[r,o]=i.split(",").map(d=>d.trim());return{bairro:r,municipio:o}}return["Marco","Icoaraci","Bengui","Marambaia","Outeiro","S\xE3o Braz","Guam\xE1","Nazar\xE9","F\xE1tima","Umarizal","Jurunas","Crema\xE7\xE3o","Tapan\xE3","Souza","Coqueiro","Pedreira","Tel\xE9grafo","Cabanagem","Canudos","Curi\xF3","Mangueir\xE3o","Val-de-C\xE3es","Pratinha"].includes(i)?{bairro:i,municipio:"Bel\xE9m"}:{bairro:i,municipio:""}}normalizarLinhaPadrao=t=>{let i=this.parseNumero(t.latitude??t.Latitude??t.LATITUDE),e=this.parseNumero(t.longitude??t.Longitude??t.LONGITUDE);return!Number.isFinite(i)||!Number.isFinite(e)?null:{id:String(t.id??t.ID??""),data:String(t.data??t.Data??""),assessor:String(t.assessor??t.Analista??t.ANALISTA??""),municipio:String(t.municipio??t.Munic\u00EDpio??t.Municipio??""),bairro:String(t.bairro??t.Bairro??""),latitude:i,longitude:e,status:String(t.status??t.Status??"planejada"),peso:Number.isFinite(this.parseNumero(t.peso))?this.parseNumero(t.peso):1}};parseNumero(t){if(t==null)return NaN;let i=String(t).trim().replace(",","."),e=Number(i);return Number.isFinite(e)?e:NaN}validarRotas(t){let i=[],e=[];return t.forEach((r,o)=>{let d=[];r.assessor||d.push("assessor vazio"),r.bairro||d.push("bairro vazio"),d.length?e.push({index:o,motivo:d.join(", ")}):i.push(Ft(Mt({},r),{peso:r.peso??1}))}),{validas:i,erros:e}}salvarRotasEmLote(t){return it(this,null,function*(){if(!t?.length)return;let i=450;for(let e=0;e<t.length;e+=i){let r=t.slice(e,e+i),o=ue(Wt);r.forEach(d=>{let c=String(d.id||crypto.randomUUID()),m=At(this.colecao,c);o.set(m,Ft(Mt({},d),{peso:d.peso??1,updatedAt:Ut()}))}),yield o.commit()}})}salvarRota(t){return it(this,null,function*(){let i=At(this.colecao,String(t.id||crypto.randomUUID()));yield de(i,Ft(Mt({},t),{peso:t.peso??1,updatedAt:Ut()}))})}listarRotas(t){return it(this,null,function*(){let i=t?.ordenarPor??"updatedAt",e=t?.limite??0,r=e>0?Ht(this.colecao,jt(i,"desc"),le(e)):Ht(this.colecao,jt(i,"desc")),o=yield ce(r),d=[];return o.forEach(c=>{let m=c.data();d.push({id:c.id,data:m.data??"",assessor:m.assessor??"",municipio:m.municipio??"",bairro:m.bairro??"",latitude:Number(m.latitude),longitude:Number(m.longitude),status:m.status??"",peso:Number.isFinite(Number(m.peso))?Number(m.peso):1})}),d})}deletarRota(t){return it(this,null,function*(){let i=At(this.colecao,t);yield pe(i)})}gerarCSVModelo(){let i=It.unparse([{id:"R-001",data:"2025-08-10",assessor:"Maria",municipio:"Bel\xE9m",bairro:"Marco",latitude:-1.4348,longitude:-48.4682,status:"planejada",peso:1},{id:"R-002",data:"2025-08-10",assessor:"Jo\xE3o",municipio:"Ananindeua",bairro:"Centro",latitude:-1.3651,longitude:-48.3723,status:"pendente",peso:2}]);return new Blob([i],{type:"text/csv;charset=utf-8;"})}static \u0275fac=function(i){return new(i||l)};static \u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"root"})};var zt=class l{cache=new Map;polyCache=new Map;constructor(){let t=localStorage.getItem("geocache_rotas");if(t)try{let e=JSON.parse(t);Object.entries(e).forEach(([r,o])=>this.cache.set(r,o))}catch{}let i=localStorage.getItem("geopoly_rotas_v1");if(i)try{let e=JSON.parse(i);Object.entries(e).forEach(([r,o])=>this.polyCache.set(r,o))}catch{}}savePointCache(){let t={};this.cache.forEach((i,e)=>t[e]=i),localStorage.setItem("geocache_rotas",JSON.stringify(t))}savePolyCache(){let t={};this.polyCache.forEach((i,e)=>t[e]=i),localStorage.setItem("geopoly_rotas_v1",JSON.stringify(t))}geocode(t){return it(this,null,function*(){let i=t.trim().toLowerCase();if(this.cache.has(i))return this.cache.get(i);let e=`https://nominatim.openstreetmap.org/search?format=json&limit=1&q=${encodeURIComponent(t)}`,r=yield fetch(e,{headers:{Accept:"application/json","User-Agent":"Crenorte-Rotas/1.0 (contato@exemplo.com)"}});if(!r.ok)return null;let o=yield r.json();if(!Array.isArray(o)||!o.length)return null;let{lat:d,lon:c}=o[0],m={lat:Number(d),lon:Number(c)};return this.cache.set(i,m),this.savePointCache(),m})}getPolygon(t){return it(this,null,function*(){let i=`poly:${t.trim().toLowerCase()}`;if(this.polyCache.has(i))return this.polyCache.get(i);let e=`https://nominatim.openstreetmap.org/search?format=json&polygon_geojson=1&limit=1&q=${encodeURIComponent(t)}`,r=yield fetch(e,{headers:{Accept:"application/json","User-Agent":"Crenorte-Rotas/1.0 (contato@exemplo.com)"}});if(!r.ok)return null;let o=yield r.json();if(!Array.isArray(o)||!o.length||!o[0].geojson)return null;let d={type:"Feature",properties:{display_name:o[0].display_name},geometry:o[0].geojson};return this.polyCache.set(i,d),this.savePolyCache(),d})}delay(t){return new Promise(i=>setTimeout(i,t))}static \u0275fac=function(i){return new(i||l)};static \u0275prov=Tt({token:l,factory:l.\u0275fac,providedIn:"root"})};var Oe=["fileInput"];function Le(l,t){if(l&1&&(p(0,"span",68),f(1),u()),l&2){let i=U();R(),pt(i.importMsg)}}function Pe(l,t){if(l&1){let i=Pt();p(0,"div",38)(1,"input",69),ct("ngModelChange",function(r){T(i);let o=U();return lt(o.mostrarHeatmap,r)||(o.mostrarHeatmap=r),A(r)}),Y("change",function(){T(i);let r=U();return A(r.updateCamadas())}),u(),p(2,"label",70),f(3,"Heatmap"),u()()}if(l&2){let i=U();R(),st("ngModel",i.mostrarHeatmap)}}function Ie(l,t){l&1&&(p(0,"div",71),f(1," Nenhuma rota encontrada no Firestore. Importe e salve para come\xE7ar. "),u())}function Fe(l,t){if(l&1){let i=Pt();Qt(0),p(1,"td",79),f(2),u(),p(3,"td"),f(4),u(),p(5,"td")(6,"span",80),f(7),u()(),p(8,"td",81),f(9),u(),p(10,"td",71),f(11),u(),p(12,"td",71),f(13),u(),p(14,"td"),f(15),u(),p(16,"td",82)(17,"button",83),Y("click",function(){T(i);let r=U().$implicit,o=U(2);return A(o.iniciarEdicao(r))}),$(18,"i",84),u(),p(19,"button",85),Y("click",function(){T(i);let r=U().$implicit,o=U(2);return A(o.excluirRota(r))}),$(20,"i",86),u()(),Yt()}if(l&2){let i,e=U().$implicit;R(2),pt(e.bairro),R(2),pt(e.municipio),R(3),pt((i=e.peso)!==null&&i!==void 0?i:1),R(2),pt(e.assessor),R(2),pt(e.latitude),R(2),pt(e.longitude),R(2),pt(e.status)}}function Te(l,t){if(l&1){let i=Pt();p(0,"td")(1,"input",87),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.bairro,r)||(o.editForm.bairro=r),A(r)}),u()(),p(2,"td")(3,"input",87),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.municipio,r)||(o.editForm.municipio=r),A(r)}),u()(),p(4,"td")(5,"input",88),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.peso,r)||(o.editForm.peso=r),A(r)}),u()(),p(6,"td")(7,"input",87),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.assessor,r)||(o.editForm.assessor=r),A(r)}),u()(),p(8,"td")(9,"input",88),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.latitude,r)||(o.editForm.latitude=r),A(r)}),u()(),p(10,"td")(11,"input",88),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.longitude,r)||(o.editForm.longitude=r),A(r)}),u()(),p(12,"td")(13,"select",89),ct("ngModelChange",function(r){T(i);let o=U(3);return lt(o.editForm.status,r)||(o.editForm.status=r),A(r)}),p(14,"option",90),f(15,"planejada"),u(),p(16,"option",91),f(17,"pendente"),u(),p(18,"option",92),f(19,"concluida"),u()()(),p(20,"td",82)(21,"button",93),Y("click",function(){T(i);let r=U(3);return A(r.salvarEdicao())}),$(22,"i",94),u(),p(23,"button",95),Y("click",function(){T(i);let r=U(3);return A(r.cancelarEdicao())}),$(24,"i",96),u()()}if(l&2){let i=U(3);R(),st("ngModel",i.editForm.bairro),R(2),st("ngModel",i.editForm.municipio),R(2),st("ngModel",i.editForm.peso),R(2),st("ngModel",i.editForm.assessor),R(2),st("ngModel",i.editForm.latitude),R(2),st("ngModel",i.editForm.longitude),R(2),st("ngModel",i.editForm.status)}}function Ae(l,t){if(l&1&&(p(0,"tr"),St(1,Fe,21,7,"ng-container",78)(2,Te,25,7,"ng-template",null,1,ne),u()),l&2){let i=t.$implicit,e=ie(3),r=U(2);R(),yt("ngIf",r.editingId!==i.id)("ngIfElse",e)}}function Ne(l,t){if(l&1&&(p(0,"div",72)(1,"table",73)(2,"thead")(3,"tr")(4,"th",74),f(5,"Bairro"),u(),p(6,"th"),f(7,"Munic\xEDpio"),u(),p(8,"th"),f(9,"Meta"),u(),p(10,"th",75),f(11,"Colaboradores"),u(),p(12,"th"),f(13,"Lat"),u(),p(14,"th"),f(15,"Lng"),u(),p(16,"th"),f(17,"Status"),u(),p(18,"th",76),f(19,"A\xE7\xF5es"),u()()(),p(20,"tbody"),St(21,Ae,4,2,"tr",77),u()()()),l&2){let i=U();R(21),yt("ngForOf",i.rotasFirestore)("ngForTrackBy",i.trackById)}}var Me=class l{constructor(t,i){this.rotasService=t;this.geo=i}fileInput;linhasImportadas=[];usarImportadasNoMapa=!1;rotasFirestore=[];editingId=null;editForm={id:"",data:"",assessor:"",municipio:"",bairro:"",latitude:0,longitude:0,status:"planejada",peso:1};importMsg="";map;tileLayer;marcadoresLayer=B.layerGroup();heatLayer=null;setorLayer=B.layerGroup();legendControl=null;mostrarHeatmap=!1;mostrarMarcadores=!1;modoSetorizacao=!0;basemap="osm";COLOR_BINS=[.2,.4,.6,.8,1.01];COLOR_SCALE=["#0ea5a0","#84cc16","#f59e0b","#f97316","#ef4444"];ngAfterViewInit(){return it(this,null,function*(){this.initMap(),yield this.carregarRotas()})}initMap(){let t=[-1.4558,-48.4902];this.map=B.map("mapid",{center:t,zoom:11,zoomControl:!0}),this.trocarBasemap(),B.control.scale({imperial:!1}).addTo(this.map),this.marcadoresLayer.addTo(this.map),this.setorLayer.addTo(this.map),this.addOrUpdateLegend(0)}trocarBasemap(){this.tileLayer&&this.map.removeLayer(this.tileLayer);let t=this.getBasemapConfig(this.basemap);this.tileLayer=B.tileLayer(t.url,{maxZoom:t.maxZoom,attribution:t.attribution}),this.tileLayer.addTo(this.map)}getBasemapConfig(t){switch(t){case"osm":return{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"&copy; OpenStreetMap contributors",maxZoom:19};case"voyager":return{url:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",attribution:"&copy; OpenStreetMap contributors &copy; CARTO",maxZoom:20};case"streets":return{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles \xA9 Esri \u2014 World Street Map",maxZoom:19};case"imagery":return{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:"Tiles \xA9 Esri \u2014 World Imagery",maxZoom:20}}}abrirSeletorArquivo(){this.fileInput?.nativeElement&&(this.fileInput.nativeElement.value="",this.fileInput.nativeElement.click())}onFileChange(t){return it(this,null,function*(){let e=t.target.files?.[0];if(e)try{let r=yield this.rotasService.parseCSV(e),{validas:o,erros:d}=this.rotasService.validarRotas(r),c=new Map;for(let b of o){let P=`${(b.bairro||"").trim().toLowerCase()}|${(b.municipio||"").trim().toLowerCase()}`;c.has(P)||c.set(P,{bairro:b.bairro,municipio:b.municipio||"Bel\xE9m",totalPeso:0,analistas:new Set});let D=c.get(P);D.totalPeso+=Number(b.peso??1),D.analistas.add(b.assessor||"\u2014")}let m=0;for(let b of c.values()){let P=`${b.bairro}${b.municipio?", "+b.municipio:""}, Par\xE1, Brasil`,D=yield this.geo.geocode(P);D&&(b.lat=D.lat,b.lng=D.lon,m++),yield this.geo.delay(500)}this.linhasImportadas=[];for(let b of c.values())Number.isFinite(b.lat)&&Number.isFinite(b.lng)&&this.linhasImportadas.push({id:`${b.bairro}-${b.municipio}`,data:"",assessor:Array.from(b.analistas).join(", "),municipio:b.municipio,bairro:b.bairro,latitude:b.lat,longitude:b.lng,status:"planejada",peso:b.totalPeso});this.importMsg=`Pr\xE9-visualiza\xE7\xE3o: ${this.linhasImportadas.length} setor(es) | geocodificados: ${m}`+(d.length?` | linhas com erro: ${d.length}`:""),this.usarImportadasNoMapa=!0,this.aplicarFonteNoMapa(),this.fitAoConteudo()}catch(r){console.error(r),this.importMsg="Falha ao ler CSV."}})}carregarRotas(){return it(this,null,function*(){try{this.rotasFirestore=yield this.rotasService.listarRotas({ordenarPor:"updatedAt"}),this.usarImportadasNoMapa||(this.updateCamadas(),this.fitAoConteudo())}catch(t){console.error(t),this.importMsg="Erro ao carregar rotas do Firestore."}})}salvarImportados(){return it(this,null,function*(){if(this.linhasImportadas.length)try{yield this.rotasService.salvarRotasEmLote(this.linhasImportadas),this.importMsg="Rotas importadas salvas no Firestore! Recarregando...",this.linhasImportadas=[],this.usarImportadasNoMapa=!1,yield this.carregarRotas()}catch(t){console.error(t),this.importMsg="Erro ao salvar rotas no Firestore."}})}trackById=(t,i)=>i.id;iniciarEdicao(t){this.editingId=t.id,this.editForm=Mt({},t)}cancelarEdicao(){this.editingId=null}salvarEdicao(){return it(this,null,function*(){if(this.editingId)try{yield this.rotasService.salvarRota(this.editForm),this.editingId=null,yield this.carregarRotas(),this.usarImportadasNoMapa||(this.updateCamadas(),this.fitAoConteudo())}catch{this.importMsg="Erro ao salvar edi\xE7\xE3o."}})}excluirRota(t){return it(this,null,function*(){if(confirm(`Excluir rota de "${t.bairro} - ${t.municipio}"?`))try{yield this.rotasService.deletarRota(t.id),yield this.carregarRotas(),this.usarImportadasNoMapa||(this.updateCamadas(),this.fitAoConteudo())}catch{this.importMsg="Erro ao excluir rota."}})}baixarModeloCSV(){let t=this.rotasService.gerarCSVModelo(),i=URL.createObjectURL(t),e=document.createElement("a");e.href=i,e.download="modelo_rotas.csv",e.click(),URL.revokeObjectURL(i)}centralizarNoPara(){let t=B.latLngBounds([-9.8,-60],[2,-41]);this.map.fitBounds(t,{padding:[20,20]})}aplicarFonteNoMapa(){this.updateCamadas(),this.fitAoConteudo()}getFonteRotas(){return this.usarImportadasNoMapa&&this.linhasImportadas.length?this.linhasImportadas:this.rotasFirestore}updateCamadas(){if(!this.map)return;this.marcadoresLayer.clearLayers(),this.setorLayer.clearLayers(),this.heatLayer&&(this.map.removeLayer(this.heatLayer),this.heatLayer=null);let t=this.getFonteRotas();if(!t.length){this.addOrUpdateLegend(0);return}if(this.modoSetorizacao){let i=this.agruparPorBairro(t);this.desenharSetorizacaoPoligonos(i)}else{let i=Math.max(...t.map(e=>e.peso??1),1);for(let e of t){if(!Number.isFinite(e.latitude)||!Number.isFinite(e.longitude))continue;let r=(e.peso||1)/i,o=this.getColorByRatio(r),d=B.circleMarker([e.latitude,e.longitude],{radius:6,weight:1.5,color:o,fillColor:o,fillOpacity:.4}).bindTooltip(`
          <div style="min-width:220px">
            <strong>${e.bairro}</strong>${e.municipio?` - <strong>${e.municipio}</strong>`:""}<br/>
            Meta (peso): <strong>${e.peso??1}</strong><br/>
            Colaboradores: <small>${e.assessor||"\u2014"}</small>
          </div>
        `,{direction:"top",sticky:!0,opacity:.98});this.marcadoresLayer.addLayer(d)}if(this.mostrarHeatmap&&B.heatLayer&&t.length){let e=t.filter(r=>Number.isFinite(r.latitude)&&Number.isFinite(r.longitude)).map(r=>[r.latitude,r.longitude,Math.max(.1,r.peso??1)]);this.heatLayer=B.heatLayer(e,{radius:25,blur:15}),this.heatLayer.addTo(this.map)}this.addOrUpdateLegend(i)}}desenharSetorizacaoPoligonos(t){return it(this,null,function*(){this.setorLayer.clearLayers();let i=Math.max(...t.map(o=>o.totalPeso),1),e=1,r=2;for(let o of t){let d=(o.totalPeso||1)/i,c=this.getColorByRatio(d),m=`${o.bairro}${o.municipio?", "+o.municipio:""}, Par\xE1, Brasil`,b=yield this.geo.getPolygon(m);if(b){let P=B.geoJSON(b,{style:()=>({color:c,weight:e+(r-e)*Math.sqrt(d),fillColor:c,fillOpacity:.35})});P.bindTooltip(`
          <div style="min-width:220px">
            <strong>${o.bairro}</strong>${o.municipio?` - <strong>${o.municipio}</strong>`:""}<br/>
            Meta total: <strong>${o.totalPeso}</strong><br/>
            Colaboradores: <small>${Array.from(o.analistas).join(", ")||"\u2014"}</small>
          </div>
        `,{direction:"top",sticky:!0,opacity:.98}),P.on("mouseover",D=>D.layer.setStyle({fillOpacity:.5})),P.on("mouseout",D=>D.layer.setStyle({fillOpacity:.35})),this.setorLayer.addLayer(P)}else if(Number.isFinite(o.lat)&&Number.isFinite(o.lng)){let P=10+25*Math.sqrt(d),D=B.circleMarker([o.lat,o.lng],{radius:P,weight:1.5,color:c,fillColor:c,fillOpacity:.35}).bindTooltip(`
              <div style="min-width:220px">
                <strong>${o.bairro}</strong>${o.municipio?` - <strong>${o.municipio}</strong>`:""}<br/>
                Meta total: <strong>${o.totalPeso}</strong><br/>
                Colaboradores: <small>${Array.from(o.analistas).join(", ")||"\u2014"}</small>
              </div>
            `,{direction:"top",sticky:!0,opacity:.98});this.setorLayer.addLayer(D)}yield this.geo.delay(500)}this.addOrUpdateLegend(i)})}fitAoConteudo(){let i=this.getFonteRotas().filter(r=>Number.isFinite(r.latitude)&&Number.isFinite(r.longitude)).map(r=>[r.latitude,r.longitude]);if(!i.length)return;let e=B.latLngBounds(i);this.map.fitBounds(e,{padding:[20,20]})}agruparPorBairro(t){let i=new Map;for(let e of t){let r=`${(e.bairro||"").trim().toLowerCase()}|${(e.municipio||"").trim().toLowerCase()}`;i.has(r)||i.set(r,{bairro:e.bairro,municipio:e.municipio,totalPeso:0,analistas:new Set,lat:0,lng:0});let o=i.get(r);if(o.totalPeso+=Number(e.peso??1),o.analistas.add(e.assessor||"\u2014"),Number.isFinite(e.latitude)&&Number.isFinite(e.longitude)){let d=o._n??0;o.lat=(d*(o.lat??0)+e.latitude)/(d+1),o.lng=(d*(o.lng??0)+e.longitude)/(d+1),o._n=d+1}}return Array.from(i.values())}getColorByRatio(t){for(let i=0;i<this.COLOR_BINS.length;i++)if(t<=this.COLOR_BINS[i])return this.COLOR_SCALE[i];return this.COLOR_SCALE[this.COLOR_SCALE.length-1]}addOrUpdateLegend(t){let i=this.COLOR_BINS,e=this.COLOR_SCALE,r=i.map(c=>Math.max(1,Math.round(c*(t||1)))),o=[`0 \u2013 ${r[0]}`,`${r[0]+1} \u2013 ${r[1]}`,`${r[1]+1} \u2013 ${r[2]}`,`${r[2]+1} \u2013 ${r[3]}`,`\u2265 ${r[3]+1}`],d=()=>e.map((c,m)=>`
      <div class="item"><span class="swatch" style="background:${c}"></span><span>${o[m]}</span></div>
    `).join("");if(this.legendControl){let c=this.legendControl.getContainer?.();c&&(c.innerHTML=`<div class="crn-legend"><div class="title">Meta (faixas)</div>${d()}</div>`)}else{let c=B.Control.extend({onAdd:()=>{let m=B.DomUtil.create("div","leaflet-control crn-legend");return m.innerHTML=`<div class="crn-legend"><div class="title">Meta (faixas)</div>${d()}</div>`,m}});this.legendControl=new c({position:"bottomright"}),this.legendControl.addTo(this.map)}}static \u0275fac=function(i){return new(i||l)(Bt(Nt),Bt(zt))};static \u0275cmp=Jt({type:l,selectors:[["app-mapa-rotas-heatmap"]],viewQuery:function(i,e){if(i&1&&Xt(Oe,5),i&2){let r;te(r=ee())&&(e.fileInput=r.first)}},decls:125,vars:12,consts:[["fileInput",""],["editRow",""],[1,"crneorte-light","crn-dashboard","container-fluid","px-3","px-md-4","py-3"],[1,"crn-topbar","d-flex","align-items-center","gap-3","mb-3"],[1,"crn-brand","d-flex","align-items-center","gap-3"],["src","../../../assets/img/logo2-crenorte.png","alt","CRENORTE","height","90",1,"crn-logo-img"],[1,"crn-subtitle","text-nowrap"],[1,"ms-auto","d-flex","align-items-center","flex-wrap","gap-2"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-file-import","me-2"],["id","fileInput","type","file","accept",".csv",1,"d-none",3,"change"],["title","Salvar setoriza\xE7\xE3o (pr\xE9-visualizada) no Firestore",1,"btn","btn-outline-success",3,"click","disabled"],[1,"fas","fa-cloud-upload-alt","me-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-download","me-2"],["title","Recarregar Firestore",1,"btn","btn-outline-dark",3,"click"],[1,"fas","fa-rotate","me-2"],["class","crn-status-chip",4,"ngIf"],[1,"crn-kpis","row","g-3","mb-3"],[1,"col-12","col-md-4"],[1,"crn-card","kpi"],[1,"label"],[1,"value"],[1,"hint"],[1,"crn-grid"],[1,"crn-side"],[1,"crn-card","mb-3"],[1,"crn-card-head"],[1,"title"],[1,"fas","fa-eye","me-2"],[1,"crn-card-body"],[1,"mb-3"],[1,"form-label","small","fw-600"],[1,"form-select","form-select-sm",3,"ngModelChange","change","ngModel"],["value","osm"],["value","voyager"],["value","streets"],["value","imagery"],[1,"form-check","form-switch","crn-switch"],["type","checkbox","id","toggleSetor",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","toggleSetor",1,"form-check-label"],["class","form-check form-switch crn-switch",4,"ngIf"],[1,"crn-sep"],[1,"d-grid","gap-2"],[1,"btn","btn-outline-dark",3,"click"],[1,"fas","fa-crosshairs","me-2"],["type","checkbox","id","toggleFonte",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","toggleFonte",1,"form-check-label"],[1,"small","text-muted"],[1,"crn-card"],[1,"fas","fa-circle-info","me-2"],[1,"crn-card-body","small"],[1,"crn-list"],[1,"crn-main"],[1,"crn-card","crn-map","mb-3"],[1,"title","d-flex","align-items-center","gap-2"],[1,"fas","fa-map","me-1"],[1,"actions","d-flex","align-items-center","gap-2"],[1,"crn-chip"],[1,"btn","btn-sm","btn-outline-dark",3,"click"],[1,"fas","fa-compress-arrows-alt","me-1"],[1,"crn-card-body","p-0"],["id","mapid",1,"crn-mapbox"],[1,"fas","fa-list","me-2"],[1,"actions"],[1,"fas","fa-rotate","me-1"],["class","text-muted",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"crn-status-chip"],["type","checkbox","id","toggleHeat",1,"form-check-input",3,"ngModelChange","change","ngModel"],["for","toggleHeat",1,"form-check-label"],[1,"text-muted"],[1,"table-responsive"],[1,"table","table-sm","align-middle","crn-table"],[2,"min-width","160px"],[2,"min-width","220px"],[1,"text-end",2,"min-width","180px"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf","ngIfElse"],[1,"fw-600"],[1,"crn-badge"],[1,"text-truncate",2,"max-width","260px"],[1,"text-end"],[1,"btn","btn-sm","btn-outline-dark","me-2",3,"click"],[1,"fas","fa-pen"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],["type","number",1,"form-control","form-control-sm",3,"ngModelChange","ngModel"],[1,"form-select","form-select-sm",3,"ngModelChange","ngModel"],["value","planejada"],["value","pendente"],["value","concluida"],[1,"btn","btn-sm","btn-success","me-2",3,"click"],[1,"fas","fa-check"],[1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fas","fa-xmark"]],template:function(i,e){if(i&1){let r=Pt();p(0,"div",2)(1,"header",3)(2,"div",4),$(3,"img",5),p(4,"div",6),f(5,"Mapa de Rotas \u2022 Setoriza\xE7\xE3o"),u()(),p(6,"div",7)(7,"button",8),Y("click",function(){return T(r),A(e.abrirSeletorArquivo())}),$(8,"i",9),f(9," Importar CSV "),u(),p(10,"input",10,0),Y("change",function(d){return T(r),A(e.onFileChange(d))}),u(),p(12,"button",11),Y("click",function(){return T(r),A(e.salvarImportados())}),$(13,"i",12),f(14," Salvar Importadas "),u(),p(15,"button",13),Y("click",function(){return T(r),A(e.baixarModeloCSV())}),$(16,"i",14),f(17," Modelo CSV "),u(),p(18,"button",15),Y("click",function(){return T(r),A(e.carregarRotas())}),$(19,"i",16),f(20," Recarregar "),u(),St(21,Le,2,1,"span",17),u()(),p(22,"section",18)(23,"div",19)(24,"div",20)(25,"div",21),f(26,"Rotas no Firestore"),u(),p(27,"div",22),f(28),u(),p(29,"div",23),f(30,"Exibidas no mapa por padr\xE3o"),u()()(),p(31,"div",19)(32,"div",20)(33,"div",21),f(34,"Pr\xE9-visualiza\xE7\xE3o importada"),u(),p(35,"div",22),f(36),u(),p(37,"div",23),f(38,"Mostra no mapa at\xE9 salvar"),u()()(),p(39,"div",19)(40,"div",20)(41,"div",21),f(42,"Modo de exibi\xE7\xE3o"),u(),p(43,"div",22),f(44),u(),p(45,"div",23),f(46,"Heatmap dispon\xEDvel no modo Pontos"),u()()()(),p(47,"section",24)(48,"aside",25)(49,"div",26)(50,"div",27)(51,"div",28),$(52,"i",29),f(53,"Exibi\xE7\xE3o"),u()(),p(54,"div",30)(55,"div",31)(56,"label",32),f(57,"Estilo do mapa"),u(),p(58,"select",33),ct("ngModelChange",function(d){return T(r),lt(e.basemap,d)||(e.basemap=d),A(d)}),Y("change",function(){return T(r),A(e.trocarBasemap())}),p(59,"option",34),f(60,"OpenStreetMap (\xE1gua azul)"),u(),p(61,"option",35),f(62,"Carto Voyager (contrastado)"),u(),p(63,"option",36),f(64,"Esri Streets (\xE1gua destacada)"),u(),p(65,"option",37),f(66,"Esri Sat\xE9lite (Imagery)"),u()()(),p(67,"div",38)(68,"input",39),ct("ngModelChange",function(d){return T(r),lt(e.modoSetorizacao,d)||(e.modoSetorizacao=d),A(d)}),Y("change",function(){return T(r),A(e.updateCamadas())}),u(),p(69,"label",40),f(70,"Setoriza\xE7\xE3o por bairro"),u()(),St(71,Pe,4,1,"div",41),$(72,"hr",42),p(73,"div",43)(74,"button",44),Y("click",function(){return T(r),A(e.centralizarNoPara())}),$(75,"i",45),f(76," Centralizar no Par\xE1 "),u()(),$(77,"hr",42),p(78,"div",38)(79,"input",46),ct("ngModelChange",function(d){return T(r),lt(e.usarImportadasNoMapa,d)||(e.usarImportadasNoMapa=d),A(d)}),Y("change",function(){return T(r),A(e.aplicarFonteNoMapa())}),u(),p(80,"label",47),f(81," Priorizar pr\xE9-visualiza\xE7\xE3o importada no mapa "),u()(),p(82,"div",48),f(83," Desligado = mapa usa as rotas do Firestore. "),u()()(),p(84,"div",49)(85,"div",27)(86,"div",28),$(87,"i",50),f(88,"Guia r\xE1pido"),u()(),p(89,"div",51)(90,"ul",52)(91,"li"),f(92,"Importe o CSV (formato matriz) para pr\xE9-visualizar."),u(),p(93,"li"),f(94,"Salve para persistir no Firestore."),u(),p(95,"li"),f(96,"O mapa carrega do Firestore automaticamente no in\xEDcio."),u(),p(97,"li"),f(98,"Edite/Exclua rotas na lista abaixo."),u()()()()(),p(99,"main",53)(100,"div",54)(101,"div",27)(102,"div",55),$(103,"i",56),f(104," Mapa de cobertura "),u(),p(105,"div",57)(106,"span",58),f(107),u(),p(108,"button",59),Y("click",function(){return T(r),A(e.centralizarNoPara())}),$(109,"i",60),f(110," Enquadrar "),u()()(),p(111,"div",61),$(112,"div",62),u()(),p(113,"div",49)(114,"div",27)(115,"div",28),$(116,"i",63),f(117,"Lista de Rotas (Firestore)"),u(),p(118,"div",64)(119,"button",59),Y("click",function(){return T(r),A(e.carregarRotas())}),$(120,"i",65),f(121," Recarregar "),u()()(),p(122,"div",30),St(123,Ie,2,0,"div",66)(124,Ne,22,2,"div",67),u()()()()()}i&2&&(R(12),yt("disabled",!e.linhasImportadas.length),R(9),yt("ngIf",e.importMsg),R(7),pt(e.rotasFirestore.length),R(8),pt(e.linhasImportadas.length),R(8),Dt(" ",e.modoSetorizacao?"Setoriza\xE7\xE3o por bairro":"Pontos"," "),R(14),st("ngModel",e.basemap),R(10),st("ngModel",e.modoSetorizacao),R(3),yt("ngIf",!e.modoSetorizacao),R(8),st("ngModel",e.usarImportadasNoMapa),R(28),Dt(" Fonte: ",e.usarImportadasNoMapa?"Pr\xE9-visualiza\xE7\xE3o":"Firestore"," "),R(16),yt("ngIf",!e.rotasFirestore.length),R(),yt("ngIf",e.rotasFirestore.length))},dependencies:[oe,re,ae,Ce,ye,ve,he,_e,me,be,ge,fe],styles:[".crn-logo-img[_ngcontent-%COMP%]{display:block;height:100px;width:300px}.crn-topbar[_ngcontent-%COMP%]   .crn-logo-img[_ngcontent-%COMP%]{filter:drop-shadow(0 1px .5px rgba(0,0,0,.08))}.crn-logo[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.6px;font-size:1.05rem}.crn-mapbox[_ngcontent-%COMP%]   .leaflet-interactive[_ngcontent-%COMP%]{cursor:pointer}.crneorte-light[_ngcontent-%COMP%]{--crn-bg: #f6f8fb;--crn-surface: #ffffff;--crn-surface-2: #fbfcff;--crn-border: #e7ecf3;--crn-primary: #0ea5a0;--crn-primary-700: #0a7f7b;--crn-accent: #0f172a;--crn-text: #111827;--crn-muted: #6b7280;--crn-success: #047857;--crn-secondary: #374151;--crn-danger: #b91c1c;--crn-shadow: 0 10px 30px rgba(16, 24, 40, .06)}.crneorte-light[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{border-radius:12px}.crneorte-light[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus-visible{outline:none;box-shadow:0 0 0 3px #0ea5a059}.crneorte-light[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--crn-primary),var(--crn-primary-700));border:none;box-shadow:0 12px 24px #0ea5a038}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-success[_ngcontent-%COMP%]{color:var(--crn-success);border-color:var(--crn-success)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-success[_ngcontent-%COMP%]:hover{color:#fff;background:var(--crn-success);border-color:var(--crn-success)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]{color:var(--crn-secondary);border-color:var(--crn-secondary)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{color:#fff;background:var(--crn-secondary);border-color:var(--crn-secondary)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-dark[_ngcontent-%COMP%]{color:var(--crn-text);border-color:var(--crn-text)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-dark[_ngcontent-%COMP%]:hover{color:#fff;background:var(--crn-text);border-color:var(--crn-text)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{color:var(--crn-danger);border-color:var(--crn-danger)}.crneorte-light[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover{color:#fff;background:var(--crn-danger);border-color:var(--crn-danger)}.crn-dashboard[_ngcontent-%COMP%]{background:var(--crn-bg);color:var(--crn-text);min-height:100vh}.crn-topbar[_ngcontent-%COMP%]{padding:.9rem 1rem;border:1px solid var(--crn-border);border-radius:18px;background:var(--crn-surface);box-shadow:var(--crn-shadow)}.crn-logo[_ngcontent-%COMP%]{font-weight:900;letter-spacing:.6px;font-size:1.05rem;color:var(--crn-accent)}.crn-subtitle[_ngcontent-%COMP%]{color:var(--crn-muted)}.crn-status-chip[_ngcontent-%COMP%]{color:#065f5b;background:#d1fae5;border:1px solid #99f6e4;padding:.35rem .6rem;border-radius:999px;font-size:.85rem}.crn-card.kpi[_ngcontent-%COMP%]{border-radius:16px;border:1px solid var(--crn-border);background:var(--crn-surface);box-shadow:var(--crn-shadow);padding:1rem 1.25rem}.crn-card.kpi[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--crn-muted);font-size:.9rem}.crn-card.kpi[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:1.7rem;font-weight:800;line-height:1.1;color:var(--crn-accent)}.crn-card.kpi[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:var(--crn-muted);font-size:.8rem}.crn-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:320px 1fr;gap:1rem}@media (max-width: 992px){.crn-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.crn-card[_ngcontent-%COMP%]{border:1px solid var(--crn-border);border-radius:16px;background:var(--crn-surface);box-shadow:var(--crn-shadow)}.crn-card-head[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.85rem 1rem;border-bottom:1px solid var(--crn-border)}.crn-card-head[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:var(--crn-accent)}.crn-card-head[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{color:var(--crn-muted)}.crn-card-body[_ngcontent-%COMP%]{padding:1rem}.crn-side[_ngcontent-%COMP%]   .crn-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{cursor:pointer;border-color:var(--crn-border);background-color:#fff}.crn-side[_ngcontent-%COMP%]   .crn-switch[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:var(--crn-primary);border-color:var(--crn-primary)}.crn-sep[_ngcontent-%COMP%]{border:none;border-top:1px solid var(--crn-border);margin:1rem 0}.crn-list[_ngcontent-%COMP%]{margin:0;padding-left:1rem}.crn-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:.25rem 0;color:var(--crn-muted)}.crn-map[_ngcontent-%COMP%]   .crn-card-body[_ngcontent-%COMP%]{padding:0}.crn-mapbox[_ngcontent-%COMP%]{height:70vh;border-radius:0 0 16px 16px;overflow:hidden;background:#f3f6fb}@media (max-width: 576px){.crn-mapbox[_ngcontent-%COMP%]{height:60vh}}.crn-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.04em;font-size:.75rem;background:#fafbff;border-bottom:1px solid var(--crn-border);color:var(--crn-muted)}.crn-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-color:var(--crn-border)}.crn-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:#f1f5f9}.crn-badge[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:8px;background:#e8fff8;color:var(--crn-success);border:1px solid #baf7df}.fw-600[_ngcontent-%COMP%]{font-weight:600}.leaflet-tooltip[_ngcontent-%COMP%]{background:#fffe;color:var(--crn-text);border:1px solid var(--crn-border);border-radius:10px;box-shadow:var(--crn-shadow)}.leaflet-control.crn-legend[_ngcontent-%COMP%]{background:#fff;border:1px solid var(--crn-border);border-radius:12px;box-shadow:var(--crn-shadow);padding:.6rem .8rem;font-size:.85rem;color:var(--crn-text)}.crn-legend[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.35rem;color:var(--crn-accent)}.crn-legend[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin:.25rem 0}.crn-legend[_ngcontent-%COMP%]   .swatch[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:4px;border:1px solid rgba(0,0,0,.1)}"]})};export{Me as MapaRotasHeatmapComponent};
