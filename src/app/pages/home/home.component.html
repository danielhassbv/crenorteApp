<!-- OPCIONAL: se você NÃO puder ajustar o CSS global, use um espaçador logo após o header -->
<!-- <div class="app-header-spacer"></div> -->
<app-header></app-header>

<!-- Conteúdo -->
<ng-container *ngIf="perfil$ | async as perfil; else loginCTA">
  <div class="container-fluid bg-light vh-100 d-flex flex-column align-items-center justify-content-center">
    <!-- Logo e título -->
    <div class="text-center mb-4">
      <br>
      <br>
      <br>
      <br>
      <img src="../../../assets/img/logo2-crenorte.png" alt="Logo Crenorte" />
      <h2 class="text-success fw-bold mt-2">Bem-vindo ao Sistema CRENORTE</h2>
    </div>

    <!-- Módulos -->
    <div class="row w-100 justify-content-center gap-4">

      <!-- Novo Cadastro (admin, assessor, supervisor, coordenador) -->
      <div class="col-md-2 col-10"
        *ngIf="perfil.papel === 'admin' || perfil.papel === 'assessor' || perfil.papel === 'supervisor' || perfil.papel === 'coordenador'">
        <a routerLink="/cadastro" class="card text-center shadow-sm p-3 text-decoration-none h-100">
          <div class="fs-1 text-success"><i class="bi bi-pencil-square"></i></div>
          <div class="mt-2 fw-bold text-dark">Novo Cadastro</div>
        </a>
      </div>


      <!-- Listagem de Cadastros (admin, assessor, supervisor, coordenador) -->
      <div class="col-md-2 col-10"
        *ngIf="perfil.papel === 'admin' || perfil.papel === 'assessor' || perfil.papel === 'supervisor' || perfil.papel === 'coordenador'">
        <a routerLink="/listagem" class="card text-center shadow-sm p-3 text-decoration-none h-100">
          <div class="fs-1 text-success"><i class="bi bi-card-list"></i></div>
          <div class="mt-2 fw-bold text-dark">Listagem de Cadastros</div>
        </a>
      </div>


      <!-- Módulo de Rotas (admin, operacional, supervisor, coordenador) -->
      <div class="col-md-2 col-10"
        *ngIf="perfil.papel === 'admin' || perfil.papel === 'operacional' || perfil.papel === 'supervisor' || perfil.papel === 'coordenador'">
        <a routerLink="/rotas" class="card text-center shadow-sm p-3 text-decoration-none h-100">
          <div class="fs-1 text-success"><i class="bi bi-map"></i></div>
          <div class="mt-2 fw-bold text-dark">Módulo de Rotas</div>
        </a>
      </div>

      <!-- Colaboradores (admin, rh) -->
      <div class="col-md-2 col-10" *ngIf="perfil.papel === 'admin' || perfil.papel === 'rh'">
        <a routerLink="/colaboradores" class="card text-center shadow-sm p-3 text-decoration-none h-100">
          <div class="fs-1 text-success"><i class="bi bi-people-fill"></i></div>
          <div class="mt-2 fw-bold text-dark">Colaboradores</div>
        </a>
      </div>
    </div>
  </div>
</ng-container>

<!-- CTA para login quando não autenticado -->
<ng-template #loginCTA>
  <div class="container-fluid bg-light vh-100 d-flex flex-column align-items-center justify-content-center">
    <div class="text-center">
      <img src="../../../assets/img/logo2-crenorte.png" alt="Logo Crenorte" />
      <h2 class="text-success fw-bold mt-3">Bem-vindo ao Sistema CRENORTE</h2>
      <p class="mt-2">Faça login para acessar o dashboard.</p>
      <a class="btn btn-success" routerLink="/login">Entrar</a>
    </div>
  </div>
</ng-template>